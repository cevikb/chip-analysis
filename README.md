# chip-analysis
Step 1

## CRAM → BAM conversion

**Input:**
- `sample_id_23143_0_0.cram` (example CRAM file, UK Biobank)
- `GRCh38_full_analysis_set_plus_decoy_hla.fa` (reference genome)

**Command:**
```bash
samtools view -T GRCh38_full_analysis_set_plus_decoy_hla.fa -b sample_id_23143_0_0.cram > sample_id.bam
```

**Output:**
- `sample_id.bam` (aligned sequence in BAM format)
- `GRCh38_full_analysis_set_plus_decoy_hla.fa.fai` (index file automatically generated by samtools)

## Step 2. Extract Read Group (RG) information from BAM

**Input:**
- `sample_id.bam` (BAM file generated in Step 1)

**Command:**
```bash
samtools view -H sample_id.bam | grep '@RG'
```

**Output:**
- Text output showing read group (`@RG`) lines from the BAM header


## Step 3 — Package BWA Reference Genome Index

In this step, 10 reference/index files were packaged into a single `.tar.gz` archive.  
The process was performed on a Windows operating system using **Command Prompt (cmd.exe)**.

**Source files (from `parabricks_sample/Ref/`):**
- Hxomo_sapiens_assembly38.fasta
- Hxomo_sapiens_assembly38.fasta.pac
- Hxomo_sapiens_assembly38.fasta.ann
- Hxomo_sapiens_assembly38.known_indels.vcf.gz.tbi
- Hxomo_sapiens_assembly38.fasta.amb
- Hxomo_sapiens_assembly38.dict
- Hxomo_sapiens_assembly38.fasta.fai
- Hxomo_sapiens_assembly38.known_indels.vcf.gz
- Hxomo_sapiens_assembly38.fasta.bwt
- Hxomo_sapiens_assembly38.fasta.sa

**Command (cmd.exe):**
```cmd
tar -czvf Ref.bwa-index.tar.gz -C parabricks_sample/Ref .
```

**Output:**
- `Ref.bwa-index.tar.gz` (archive containing the 10 files listed above)

**Note:** The reference/index files were obtained from DNAnexus Community and packaged into `Ref.bwa-index.tar.gz` using Windows Command Prompt (cmd.exe).

